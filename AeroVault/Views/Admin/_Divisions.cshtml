@model AeroVault.Views.Shared.AdminDepartmentPopups._AdminAddDepartmentPopupModel

@{
    var addUrl = Url.Action("AddDivision", "Divisions");
    var getUrl = Url.Action("GetAllDivisions", "Divisions");
}

<link href="~/Content/css/ProjectStyles/notiflix.css" rel="stylesheet" />
<link rel="stylesheet" href="~/Content/css/ProjectStyles/JQuerryTable/jquery.dataTables.min.css">
<link rel="stylesheet" href="~/Content/css/AdminDivision.css">
<link rel="stylesheet" href="~/Content/css/ProjectStyles/Bootstrap/bootstrap.min.css" />
@* <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous"> *@


<div class="admin-main-content" style="height:100%">

    <div class="header-container">

        <h2 class="systems-header" id="systems-header">
            Select a Division to Manage
        </h2>
       @*  <button class="add-system-button add-dep-button">
            <img src="~/Content/Assets/add-icon.svg" alt="Add Icon" class="button-icon" />
            Add New Division
        </button> *@
        <!-- Button trigger modal -->
        <button type="button" id="add_divisionBtn" class="btn-add" data-toggle="modal" data-target="#exampleModal">
            Add New Division
        </button>

    </div>


    <div class="sidebar-container">

        <div class="card-body">
            <div class="row">
                <div class="col-sm-12">
                    <table id="division-viewer" class="display" style="width:100%"></table>
                </div>
            </div>
        </div>

    </div>

</div>




<!-- Modal -->
<!-- Modal -->

<div class="modal fade" id="addDivisionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true"
    data-add-url="@addUrl"
    data-get-url="@getUrl">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add Division</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
                <p>Enter division name to add this division</p>
                <div class="add-dep-form-popup">
                    <label for="new-department-name" style="display: inline-block;">Division Name</label>                  
                    <input type="text" class="form-control" id="add-department-name" placeholder="Enter New Division Name">
                </div>
            </div>

            <div class="modal-footer">

                <div class="modal-footer">                
                    <button type="button" id="btnSave" class="btn-save">Save</button>
                </div>
            </div>

        </div>
    </div>
</div>


<div class="modal fade" id="editDivisionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true"
     data-add-url="@addUrl"
     data-get-url="@getUrl">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Edit Division</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">           
                <div class="add-dep-form-popup">
                    <label for="new-department-name" style="display: inline-block;">Division Name</label>                
                    <input type="text" class="form-control" id="edit-department-name" placeholder="Enter New Division Name">
                </div>
            </div>

            <div class="modal-footer">

                <div class="modal-footer">
                    <button type="button" id="btnUpdate" class="btn-save">Update</button>
                </div>
            </div>

        </div>
    </div>
</div>






@*<div class="modal fade" id="adddepartment-popup" style="display: none;"

    <div class="modal-header">
        <h2>Add Division</h2>
        <img src="~/Content/Assets/close-icon.svg" id="close-icon-dep1" style="cursor:pointer;" />
    </div>

    <div class="modal-body">
        <p>Enter division name to add this division</p>
        <div class="add-dep-form-popup">
            <label for="new-department-name" style="display: inline-block;">Division Name</label>
            <span id="division-name-error" style="color: red; display: none; margin-left: 10px;">Please enter a division name.</span>

               <input type="text"
                   id="new-department-name"
                   placeholder="New Division Name"
                   required
                   oninvalid="this.setCustomValidity('Please enter a division name')"
                   oninput="this.setCustomValidity('')">
        </div>
    </div>

    <div class="modal-footer">

        <button id="add-new-division-btn"
                class="save-btn add-new-dep-popup-btn">
            Add New Division
        </button>
    </div>
</div>*@

<div class="modal" id="adddepartment-popup" style="display: none" tabindex=" -1">
    <div class="modal-header">
        <h2>Add Department</h2>
        <img src="~/Content/Assets/close-icon.svg" id="close-icon-dep1" style="cursor:pointer;" />
    </div>

    <div class="modal-body">
        <p>Enter department name, select division to add this department</p>
        <div class="add-dep-form-popup">
            <div style="display: flex; align-items: center;">
                <label for="new-department-name">Department Name</label>
                <span id="department-name-error" style="color: red; margin-left: 10px; margin-bottom: 5px; display: none;">Please enter a department name</span>
            </div>
            <input type="text" id="new-department-name" placeholder="New Department Name" />
        </div>

        <div class="unique-form-group unique-add-dep-popup-dropdown">
            <div style="display: flex; align-items: center;">
                <label class="unique-label" for="unique-selector">Select Division</label>
                <span id="division-error" style="color: red; margin-left: 10px; margin-bottom: 5px; display: none;">Please select a division</span>
            </div>
            <div class="unique-dropdown">
                <div class="unique-dropdown-toggle unique-selector" onclick="toggleUniqueDropdown()">
                    <span id="unique-selected-option">Select a Division</span>
                    <i class="fas fa-chevron-down"></i>
                </div>

                <div class="unique-dropdown-content">
                    <div class="unique-search-container">
                        <img src="~/Content/Assets/search-icon.svg" alt="Search Icon" />
                        <input type="text" id="unique-search-input" placeholder="Search Division" onkeyup="filterUniqueOptions()" onclick="event.stopPropagation()">
                    </div>
                    <div class="unique-dropdown-list" id="division-dropdown-list">
                        @foreach (var division in ViewData["Divisions"] as List<AeroVault.Models.DivisionModel> ?? new List<AeroVault.Models.DivisionModel>())
                        {
                            <div onclick="selectUniqueOption(this)" data-division-id="@division.DivisionID">
                                @division.DivisionName
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-footer" style="border:none;">
        <button class="save-btn add-new-dep-popup-btn" id="add-department-btn">Add New Department</button>
    </div>

</div>



<script src="~/Scripts/jquery.min.js"></script>
<script src="~/Scripts/ProjectScripts/JQuerryTable/jquery.dataTables.min.js"></script>
<script src="~/Scripts/ProjectScripts/Bootstrap/bootstrap.min.js"></script>
@* <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script> *@
<script src="~/Scripts/AdminDivisionScripts.js"></script>

<script src="~/Scripts/ProjectScripts/notiflix.js"></script>



<!-- Edit Division Modal -->
