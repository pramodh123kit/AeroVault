<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="~/css/AdminLayout.css" />
</head>
<body>
    <div class="container">
        <div class="sidebar" id="sidebar">
            <img src="~/Assets/AeroVault-Logo.svg" alt="AeroVault Logo" class="logo" />
            <div class="profile-info" style="margin-top:0px">
                <img src="~/Assets/AdminProf.svg" alt="Profile Picture">
                <span class="name">Pramodh Lihinikaduwa</span>
            </div>
            <ul class="menu">
                @*  <li class="nav-item">
                    <a href="javascript:void(0);" onclick="loadContent('_Overview', 'Overview')" class="nav-link">
                        <img src="~/Assets/overview-icon.svg" alt="Overview Icon" class="sidebar-icon" />
                        Overview
                    </a>
                </li>
                <li class="nav-item">
                    <a href="javascript:void(0);" onclick="loadContent('_Upload', 'Upload')" class="nav-link">
                        <img src="~/Assets/upload-icon.svg" alt="Upload Icon" class="sidebar-icon" />
                        Upload
                    </a>
                </li>
                <li class="nav-item">
                    <a href="javascript:void(0);" onclick="loadContent('_Systems', 'Manage')" class="nav-link">
                        <img src="~/Assets/systems-icon.svg" alt="Systems Icon" class="sidebar-icon" />
                        Systems
                    </a>
                </li>
                <li class="nav-item">
                    <a href="javascript:void(0);" onclick="loadContent('_Departments', 'Manage')" class="nav-link">
                        <img src="~/Assets/departments-icon.svg" alt="Departments Icon" class="sidebar-icon" />
                        Departments
                    </a>
                </li>
                <li class="nav-item">
                    <a href="javascript:void(0);" onclick="loadContent('_Divisions', 'Manage')" class="nav-link">
                        <img src="~/Assets/divisions-icon.svg" alt="Divisions Icon" class="sidebar-icon" />
                        Divisions
                    </a>
                </li>
                <li class="nav-item">
                    <a href="javascript:void(0);" onclick="loadContent('_Review', 'Review')" class="nav-link">
                        <img src="~/Assets/review-icon.svg" alt="Review Icon" class="sidebar-icon" />
                        Review
                    </a>
                </li>  *@







                <li class="nav-item">
                    <a href="javascript:void(0);" onclick="loadContent('_Overview', 'Overview')" class="nav-link">
                        <img src="~/Assets/overview-icon.svg" alt="Overview Icon" class="sidebar-icon" />
                        Overview
                    </a>
                </li>
                <li class="nav-item">
                    <a href="javascript:void(0);" onclick="loadContent('_Upload', 'Upload')" class="nav-link">
                        <img src="~/Assets/upload-icon.svg" alt="Upload Icon" class="sidebar-icon" />
                        Upload
                    </a>
                </li>
                <li class="nav-item">
                    <a href="javascript:void(0);" id="manage-toggle" class="nav-link">
                        <img src="~/Assets/manage-icon.svg" alt="Manage Icon" class="sidebar-icon" />
                        Manage
                        <span id="dropdown-icon" class="dropdown-icon">▼</span> <!-- Dropdown icon -->
                    </a>
                    <ul class="sub-menu" id="manage-sub-menu">
                        <li class="nav-item" style="margin-top:10px;">
                            <a href="javascript:void(0);" onclick="loadContent('_Systems', 'Manage')" class="nav-link">
                                <img src="~/Assets/systems-icon.svg" alt="Systems Icon" class="sidebar-icon" />
                                Systems
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="javascript:void(0);" onclick="loadContent('_Departments', 'Manage')" class="nav-link">
                                <img src="~/Assets/departments-icon.svg" alt="Departments Icon" class="sidebar-icon" />
                                Departments
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="javascript:void(0);" onclick="loadContent('_Divisions', 'Manage')" class="nav-link">
                                <img src="~/Assets/divisions-icon.svg" alt="Divisions Icon" class="sidebar-icon" />
                                Divisions
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a href="javascript:void(0);" onclick="loadContent('_Review', 'Review')" class="nav-link">
                        <img src="~/Assets/review-icon.svg" alt="Review Icon" class="sidebar-icon" />
                        Review
                    </a>
                </li>








            </ul>
          
            @* <img src="~/Assets/admin-sidebar-peacock.svg" alt="Sri Lankan IT Systems Logo" class="footer-logo  peacock-background" /> *@
            <img src="~/Assets/admin-sidebar-SLA-logo.svg" alt="Sri Lankan Peacock brand" class="footer-logo" />
            
        </div>

        <div class="overlay" id="overlay"></div>

        <div class="content">
            <div class="header">
                <div style="display: flex; align-items: center;">
                    <img src="~/Assets/admin-sidebar-collapse.svg" alt="sidebar-collapse-icon" id="sidebar-toggle" />
                    <h1 class="page-title-name">Overview</h1>
                </div>
                <img src="~/Assets/LogoutIcon.svg" alt="Logout-icon" />
            </div>

            <div class="main-content" id="main-content">
                @RenderBody()
            </div>

            <footer class="footer-section">
                <div class="footer-content">
                    <img src="~/Assets/copyright-icon.svg" alt="Copyright Icon" class="copyright-icon">
                    <span>2024 Sri Lankan IT Systems. All Rights Reserved.</span>
                </div>
            </footer>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
          // Sidebar toggle functionality
        document.getElementById('sidebar-toggle').addEventListener('click', function () {
            document.getElementById('sidebar').classList.toggle('sidebar-visible');
            document.getElementById('overlay').classList.toggle('overlay-visible');
        });

        document.getElementById('overlay').addEventListener('click', function () {
            document.getElementById('sidebar').classList.remove('sidebar-visible');
            this.classList.remove('overlay-visible');
        });


        // Hide sidebar and overlay when overlay is clicked
        overlay.addEventListener('click', function () {
            sidebar.classList.remove('sidebar-visible');
            overlay.classList.remove('overlay-visible');
            content.classList.add('full-width'); // Reset content width when sidebar is hidden
        });




        function loadContent(viewName, pageTitle) {
            // Update the page title
            document.querySelector('.page-title-name').textContent = pageTitle;

            // Ajax call to load the content
            $.ajax({
                url: '@Url.Action("LoadView", "Admin")',
                type: 'GET',
                data: { viewName: viewName },
                success: function (result) {
                    $('#main-content').html(result);
                },
                error: function (xhr, status, error) {
                    console.error("Error loading content:", error);
                    $('#main-content').html('<p class="text-danger">Failed to load content. Please try again later.</p>');
                }
            });
        }



        document.addEventListener("DOMContentLoaded", function () {
            const sidebarToggle = document.getElementById("sidebar-toggle");
            const sidebar = document.getElementById("sidebar");
          
            sidebarToggle.addEventListener("click", function () {
                sidebar.classList.toggle("hidden");
            });
        });


              document.getElementById('manage-toggle').addEventListener('click', function () {
            const subMenu = document.getElementById('manage-sub-menu');
            const dropdownIcon = document.getElementById('dropdown-icon');

            // Check if the sub-menu is currently visible
        const isVisible = subMenu.classList.contains('visible');

            // Toggle the max-height property and the visible class
            if (!isVisible) {
                subMenu.style.maxHeight = subMenu.scrollHeight + "px"; // Set to the height of the menu
                subMenu.classList.add('visible'); // Add visible class
            } else {
                subMenu.style.maxHeight = null; // Collapse the menu
                subMenu.classList.remove('visible'); // Remove visible class
            }
        });

               // Function to handle nav link clicks
        function handleNavLinkClick(event) {
            // Remove active class from all nav links
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => link.classList.remove('active'));

            // Add active class to the clicked link
            event.currentTarget.classList.add('active');

            // Check if the clicked link is a subheading under Manage
            if (event.currentTarget.closest('#manage-sub-menu')) {
                // Add active class to the Manage link
                const manageLink = document.getElementById('manage-toggle');
                manageLink.classList.add('active');
            } else {
                // If it's not a subheading, remove active class from Manage link
                const manageLink = document.getElementById('manage-toggle');
                manageLink.classList.remove('active');
            }

            // Call the loadContent function
            const viewName = event.currentTarget.getAttribute('onclick').match(/'([^']+)'/)[1];
            const pageTitle = event.currentTarget.textContent.trim();
            loadContent(viewName, pageTitle);
        }

        // Attach click event listeners to nav links
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', handleNavLinkClick);
        });



    </script>
</body>
</html>