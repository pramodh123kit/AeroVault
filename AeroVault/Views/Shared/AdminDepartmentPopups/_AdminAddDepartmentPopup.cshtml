@page

@model AeroVault.Views.Shared.AdminDepartmentPopups._AdminAddDepartmentPopupModel

@{

}

<div class="modal-notification-edit" id="adddepartment-popup" style="display: none;">
    <div class="modal-header">
        <h2>Add Department</h2>
        <img src="~/Assets/close-icon.svg" id="close-icon-dep1" style="cursor:pointer;" />
    </div>

    <div class="modal-body">
        <p>Enter department name, select division to add this department</p>
        <div class="add-dep-form-popup">
            <label for="new-department-name">Department Name</label>
            <input type="text" id="new-department-name" placeholder="New Department Name">
        </div>

        <div class="unique-form-group unique-add-dep-popup-dropdown">
            <label class="unique-label" for="unique-selector">Select Option</label>
            <div class="unique-dropdown">
                <div class="unique-dropdown-toggle unique-selector" onclick="toggleUniqueDropdown()">
                    <span id="unique-selected-option">Information Technology</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="unique-dropdown-content">
                    <div class="unique-search-container">
                        <img src="~/Assets/search-icon.svg" alt="Search Icon" />
                        <input type="text" id="unique-search-input" placeholder="Search Option" onkeyup="filterUniqueOptions()" onclick="event.stopPropagation()">
                    </div>
                    <div class="unique-dropdown-list">
                        <div onclick="selectUniqueOption(this)" class="active">Information Technology</div>
                        <div onclick="selectUniqueOption(this)">Human Resource</div>
                        <div onclick="selectUniqueOption(this)">Flight Operations</div>
                        <div onclick="selectUniqueOption(this)">Safety and Security</div>
                        <div onclick="selectUniqueOption(this)">Finance</div>
                        <div onclick="selectUniqueOption(this)">Marketing</div>
                        <div onclick="selectUniqueOption(this)">Customer Service</div>
                        <div onclick="selectUniqueOption(this)">Logistics</div>
                        <div onclick="selectUniqueOption(this)">Procurement</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-footer">
        <button class="save-btn add-new-dep-popup-btn">Add New Department</button>
    </div>
</div>

<style>
    .modal-footer {
        display: flex;
        justify-content: flex-end;
        width: 100%;
        padding: 0 20px;
    }

        .modal-footer .save-btn {
            width: 200px;
        }

    #unique-selected-option {
        color: #333333;
    }

    .add-dep-form-popup {
        margin-top: 20px;
    }

    .unique-form-group {
        margin-bottom: 0px;
        margin-top: 0px;
        padding: 0px;
    }

    .unique-dropdown {
        position: relative;
        display: inline-block;
        width: 100%;
    }

    .unique-dropdown-content {
        display: none;
        position: absolute;
        background-color: #fff;
        min-width: 100%;
        border: 1px solid #6D6D6D;
        border-top: none;
        border-bottom-right-radius: 10px;
        border-bottom-left-radius: 10px;
        z-index: 1;
    }

    .unique-dropdown-list {
        height: 150px;
        overflow-y: scroll;
    }

        .unique-dropdown-list::-webkit-scrollbar {
            width: 10px;
            background-color: #fff;
        }

        .unique-dropdown-list::-webkit-scrollbar-thumb {
            background-color: #135176;
            border-radius: 100px;
            height: 20px;
        }

        .unique-dropdown-list div {
            padding: 8px 16px;
            cursor: pointer;
        }

            .unique-dropdown-list div:hover {
                background-color: #BBDCF9;
            }

        .unique-dropdown-list .active {
            font-weight: bold;
        }

    .unique-dropdown-toggle {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px;
        border: 1px solid #6D6D6D;
        border-bottom: none;
        border-radius: 4px;
        cursor: pointer;
    }

        .unique-dropdown-toggle i {
            margin-left: 10px;
            transition: transform 0.3s;
        }

        .unique-dropdown-toggle.open i {
            transform: rotate(180deg);
        }

    .unique-selector {
        border: 1px solid #6D6D6D;
        border-radius: 10px;
    }

    .unique-search-container {
        display: flex;
        border-bottom: 1px solid #938C8C;
        margin: 20px;
        margin-top: 0px;
    }

        .unique-search-container img {
            color: #999;
            margin-right: 5px;
            font-size: 20px;
            margin-left: 5px;
        }

        .unique-search-container input {
            border: none;
            color: #000;
            font-size: 16px;
            outline: none;
            flex: 1;
            padding: 5px;
        }

    #unique-search-input {
        margin-left: 0px;
        border: none;
    }

    .unique-dropdown-toggle::after {
        content: none;
    }

    #unique-search-input {
        margin-bottom:0;
    }
    </style>

<script>
    function toggleUniqueDropdown() {
        var dropdownContent = document.querySelector('.unique-dropdown-content');
        var dropdownToggle = document.querySelector('.unique-dropdown-toggle');
        var selector = document.querySelector('.unique-selector');

        if (dropdownContent.style.display === 'block') {
            dropdownContent.style.display = 'none';
            dropdownToggle.classList.remove('open');

            selector.style.borderBottomLeftRadius = '10px';
            selector.style.borderBottomRightRadius = '10px';
            selector.style.borderBottom = '1px solid #6D6D6D';
        } else {
            dropdownContent.style.display = 'block';
            dropdownToggle.classList.add('open');

            selector.style.borderBottomLeftRadius = '0';
            selector.style.borderBottomRightRadius = '0';
            selector.style.borderBottom = 'none';
            document.getElementById('unique-search-input').value = '';
            showAllUniqueOptions();
        }
    }

    function filterUniqueOptions() {
        var input, filter, div, i, txtValue;
        input = document.getElementById('unique-search-input');
        filter = input.value.toUpperCase();
        div = document.querySelectorAll('.unique-dropdown-list div');
        for (i = 0; i < div.length; i++) {
            txtValue = div[i].textContent || div[i].innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                div[i].style.display = "";
            } else {
                div[i].style.display = "none";
            }
        }
    }

    function selectUniqueOption(element) {
        var selectedOption = element.textContent || element.innerText;
        document.getElementById('unique-selected-option').textContent = selectedOption;
        document.querySelector('.unique-dropdown-content').style.display = 'none';
        document.querySelector('.unique-dropdown-toggle').classList.remove('open');

        var selector = document.querySelector('.unique-selector');
        selector.style.borderBottomLeftRadius = '10px';
        selector.style.borderBottomRightRadius = '10px';
        selector.style.borderBottom = '1px solid #6D6D6D';

        var divs = document.querySelectorAll('.unique-dropdown-list div');
        divs.forEach(function (div) {
            div.classList.remove('active');
        });
        element.classList.add('active');
    }

    function showAllUniqueOptions() {
        var divs = document.querySelectorAll('.unique-dropdown-list div');
        divs.forEach(function (div) {
            div.style.display = "";
        });
    }

    document.getElementById('unique-search-input').addEventListener('blur', function () {
        const selector = document.querySelector('.unique-selector');

        selector.style.borderBottomLeftRadius = '10px';
        selector.style.borderBottomRightRadius = '10px';

        selector.style.border = '1px solid #6D6D6D';
    });

    window.onclick = function (event) {
        var dropdownContent = document.querySelector('.unique-dropdown-content');
        var dropdownToggle = document.querySelector('.unique-dropdown-toggle');
        var selector = document.querySelector('.unique-selector');

        if (!dropdownToggle.contains(event.target) && !dropdownContent.contains(event.target) && dropdownContent.style.display === 'block') {
            dropdownContent.style.display = 'none';
            dropdownToggle.classList.remove('open');
            selector.style.borderBottomLeftRadius = '10px';
            selector.style.borderBottomRightRadius = '10px';
            selector.style.borderBottom = '1px solid #6D6D6D';
        }
    };
</script>